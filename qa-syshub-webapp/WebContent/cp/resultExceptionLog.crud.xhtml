<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:b="http://quakearts.com/2.0/boot"
	xmlns:c="http://quakearts.com/2.0/common">
<ui:component>
	<c:unique>
    	<h:panelGroup id="resultExceptionLogAgentConfigurationInset" layout="block" styleClass="#{loader.overlayClass}">
    		<b:formGroup>
    			<label id="agentConfiguration_label">Agent Configuration
    				<h:commandLink value="New" styleClass="#{!resultExceptionLogPage.agentConfigurationDropdownHelper.inCreateMode?'':'collapse'}"
						rendered="#{resultExceptionLogPage.inCreateOrEditMode}">
    					<f:ajax onevent="#{loader.overlayAjaxLoader}" execute="@this" render="resultExceptionLogAgentConfigurationInset"></f:ajax>
    					<f:setPropertyActionListener value="#{true}" target="#{resultExceptionLogPage.agentConfigurationDropdownHelper.inCreateMode}"></f:setPropertyActionListener>
    				</h:commandLink>
    			</label>
    			<b:selectOneInput mainClass="#{loader.overlayClass}" disabled="#{resultExceptionLogPage.webappmain.mode eq 'read' || resultExceptionLogPage.agentConfigurationDropdownHelper.inCreateMode}"
    				value="#{resultExceptionLog.agentConfiguration}" autocomplete="true"
    				suggestion="#{resultExceptionLogPage.agentConfigurationDropdownHelper.searchText}" delay="1"
    				listener="#{resultExceptionLogPage.agentConfigurationDropdownHelper.filterItems}"
    				onevent="#{loader.overlayAjaxLoader}">
    				<f:selectItems value="#{resultExceptionLogPage.agentConfigurationDropdownHelper.foundItems}" 
    					var="agentConfiguration" itemValue="#{agentConfiguration}" itemLabel= "#{agentConfiguration.agentName} ">
    				</f:selectItems>
    				<c:pojoConverter></c:pojoConverter>
    			</b:selectOneInput>
    		</b:formGroup>
    		<h:panelGroup rendered="#{resultExceptionLogPage.agentConfigurationDropdownHelper.inCreateMode}">
    			<span class="h4">Create Agent Configuration</span>
    			<ui:include src="agentConfiguration.crud.xhtml">
    				<ui:param name="agentConfiguration" value="#{resultExceptionLogPage.agentConfigurationDropdownHelper.agentConfiguration}"></ui:param>
    			</ui:include>
    			<b:buttonGroup>
        			<b:button value="Save Agent Configuration">
						<c:saveUpdate domain="system" object="#{resultExceptionLogPage.agentConfigurationDropdownHelper.agentConfiguration}" action="save" />
        				<f:setPropertyActionListener value="#{resultExceptionLogPage.agentConfigurationDropdownHelper.agentConfiguration}" target="#{resultExceptionLog.agentConfiguration}"></f:setPropertyActionListener>
    					<f:setPropertyActionListener value="#{false}" target="#{resultExceptionLogPage.agentConfigurationDropdownHelper.inCreateMode}"></f:setPropertyActionListener>
        				<f:ajax execute="resultExceptionLogAgentConfigurationInset" render="resultExceptionLogAgentConfigurationInset" onevent="#{loader.overlayAjaxLoader}"></f:ajax>
        			</b:button>
        			<b:button value="Cancel">
    					<f:ajax onevent="#{loader.overlayAjaxLoader}" execute="@this" render="resultExceptionLogAgentConfigurationInset"></f:ajax>
    					<f:setPropertyActionListener value="#{false}" target="#{resultExceptionLogPage.agentConfigurationDropdownHelper.inCreateMode}"></f:setPropertyActionListener>
        			</b:button>
    			</b:buttonGroup>
    			<br />
    			<br />
    		</h:panelGroup>		
    	</h:panelGroup>	
	</c:unique>
	<c:unique>
    	<h:panelGroup id="agentConfigurationParameterAgentModuleInset" layout="block" styleClass="#{loader.overlayClass}">
    		<b:formGroup>
    			<label id="agentModule_label">Agent Module
    				<h:commandLink value="New" styleClass="#{!agentConfigurationParameterPage.agentModuleDropdownHelper.inCreateMode?'':'collapse'}"
						rendered="#{agentConfigurationParameterPage.inCreateOrEditMode}">
    					<f:ajax onevent="#{loader.overlayAjaxLoader}" execute="@this" render="agentConfigurationParameterAgentModuleInset"></f:ajax>
    					<f:setPropertyActionListener value="#{true}" target="#{agentConfigurationParameterPage.agentModuleDropdownHelper.inCreateMode}"></f:setPropertyActionListener>
    				</h:commandLink>
    			</label>
    			<b:selectOneInput mainClass="#{loader.overlayClass}" disabled="#{agentConfigurationParameterPage.webappmain.mode eq 'read' || agentConfigurationParameterPage.agentModuleDropdownHelper.inCreateMode}"
    				value="#{resultExceptionLog.agentModule}" autocomplete="true"
    				suggestion="#{agentConfigurationParameterPage.agentModuleDropdownHelper.searchText}" delay="1"
    				listener="#{agentConfigurationParameterPage.agentModuleDropdownHelper.filterItems}"
    				onevent="#{loader.overlayAjaxLoader}">
    				<f:selectItems value="#{agentConfigurationParameterPage.agentModuleDropdownHelper.foundItems}" 
    					var="agentModule" itemValue="#{agentModule}" itemLabel= "#{agentModule.moduleClassName} / #{agentModule.moduleName} ">
    				</f:selectItems>
    				<c:pojoConverter></c:pojoConverter>
    			</b:selectOneInput>
    		</b:formGroup>
    		<h:panelGroup rendered="#{agentConfigurationParameterPage.agentModuleDropdownHelper.inCreateMode}">
    			<span class="h4">Create Agent Module</span>
    			<ui:include src="agentModule.crud.xhtml">
    				<ui:param name="agentModule" value="#{agentConfigurationParameterPage.agentModuleDropdownHelper.agentModule}"></ui:param>
    			</ui:include>
    			<b:buttonGroup>
        			<b:button value="Save Agent Module">
						<c:saveUpdate domain="system" object="#{agentConfigurationParameterPage.agentModuleDropdownHelper.agentModule}" action="save" />
        				<f:setPropertyActionListener value="#{agentConfigurationParameterPage.agentModuleDropdownHelper.agentModule}" target="#{resultExceptionLog.agentModule}"></f:setPropertyActionListener>
    					<f:setPropertyActionListener value="#{false}" target="#{agentConfigurationParameterPage.agentModuleDropdownHelper.inCreateMode}"></f:setPropertyActionListener>
        				<f:ajax execute="agentConfigurationParameterAgentModuleInset" render="agentConfigurationParameterAgentModuleInset" onevent="#{loader.overlayAjaxLoader}"></f:ajax>
        			</b:button>
        			<b:button value="Cancel">
    					<f:ajax onevent="#{loader.overlayAjaxLoader}" execute="@this" render="agentConfigurationParameterAgentModuleInset"></f:ajax>
    					<f:setPropertyActionListener value="#{false}" target="#{agentConfigurationParameterPage.agentModuleDropdownHelper.inCreateMode}"></f:setPropertyActionListener>
        			</b:button>
    			</b:buttonGroup>
    			<br />
    			<br />
    		</h:panelGroup>		
    	</h:panelGroup>	
	</c:unique>	
	<b:formGroup>
		<label id="exceptionDt_label">Exception Date</label>
		<b:date nullable="true" dayClass="btn-xs" monthClass="btn-xs" yearClass="btn-xs" rendered="#{resultExceptionLogPage.inCreateOrEditMode}" format="dmyhns"
			value="#{resultExceptionLog.exceptionDt}" converter="#{resultExceptionLogPage.webappmain.converter}" 
			disabled="#{resultExceptionLogPage.webappmain.mode eq 'read'}">
		</b:date>
		<h:outputText styleClass="form-control disabled" value="#{resultExceptionLog.exceptionDt}" rendered="#{resultExceptionLogPage.webappmain.mode eq 'read'}">
			<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss S"></f:convertDateTime>
		</h:outputText>
		<h:panelGroup rendered="#{resultExceptionLogPage.webappmain.mode != 'read' and !resultExceptionLogPage.inCreateOrEditMode}">
			<b:date nullable="true" dayClass="btn-xs" monthClass="btn-xs" yearClass="btn-xs" 
				value="#{resultExceptionLogPage.exceptionDtRange.from}" converter="#{resultExceptionLogPage.webappmain.converter}">
			</b:date>
			<div>to</div>
			<b:date nullable="true" dayClass="btn-xs" monthClass="btn-xs" yearClass="btn-xs" 
				value="#{resultExceptionLogPage.exceptionDtRange.to}" converter="#{resultExceptionLogPage.webappmain.converter}">
			</b:date>
		</h:panelGroup>
	</b:formGroup>
	<b:formGroup>
		<label id="exceptionType_label">Exception Type</label>
		<h:inputText styleClass="form-control" value="#{resultExceptionLog.exceptionType}" disabled="#{resultExceptionLogPage.webappmain.mode eq 'read'}">
		</h:inputText>
	</b:formGroup>
	<b:formGroup>
		<label id="resultData_label">Result Data</label>
		<h:inputTextarea styleClass="form-control" value="#{resultExceptionLog.resultData}" rows="5"
			disabled="#{resultExceptionLogPage.webappmain.mode eq 'read'}"
			rendered="#{!resultExceptionLogPage.webappmain.inSearchMode}"
			converter="#{resultExceptionLogPage.webappmain.base64Converter}">					
		</h:inputTextarea>
	</b:formGroup>
	
</ui:component>
</html>
